# X4 征服遊戲

一個簡化版的4X策略遊戲，多個LLM AI玩家競相征服領土。

## 遊戲特色

### 核心機制

- **人口增長**: 每回合人口增長2.5倍（符合您的2/5倍需求）
- **領土征服**: 玩家可以移動人口去攻擊和佔領其他領土
- **不規則地圖**: 每個領土大小不同，擁有不同的地形和特殊屬性
- **AI對戰**: 使用OpenRouter API進行真實的LLM對戰

### 新增特色

- **地形系統**: 平原、森林、山脈、海岸、沙漠等不同地形
- **防禦加成**: 山脈等地形提供防禦優勢
- **人口上限**: 每個領土有容量限制
- **戰鬥系統**: 攻防對決，加入隨機性
- **多種勝利條件**: 控制60%領土或50%人口即可獲勝

## 快速開始

### 1. 安裝依賴

```bash
pip install -r requirements.txt
```

### 2. 設置API Key (可選)

```bash
export OPENROUTER_API_KEY="your_openrouter_api_key_here"
```

如果沒有API Key，遊戲會使用簡單AI模式運行。

### 3. 運行遊戲

```bash
python run_game.py
```

## 遊戲玩法

### 初始設置

- 4個AI玩家開始遊戲
- 每個玩家控制一塊起始領土
- 12塊領土分布在地圖上
- 15回合時間限制

### 每回合流程

1. **AI決策**: 每個玩家選擇行動
   - 移動人口攻擊鄰近領土
   - 等待讓人口自然增長
2. **戰鬥解決**: 如果發生衝突，計算戰鬥結果
3. **人口增長**: 所有領土人口增長2.5倍（受容量限制）

### 勝利條件

- 控制60%的領土
- 擁有50%的總人口
- 或在15回合結束時領土最多

## 文件說明

- `x4_game.py`: 核心遊戲邏輯
- `run_game.py`: 遊戲啟動器
- `game_state.yaml`: 人類可讀的遊戲狀態
- `game_state.json`: 程序使用的遊戲狀態
- `requirements.txt`: Python依賴

## 地形類型

| 地形 | 人口容量倍數 | 特色 |
|------|-------------|------|
| 平原 | 1.2x | 最適合人口增長 |
| 森林 | 1.0x | 平衡的發展 |
| 山脈 | 0.7x | 高防禦加成 |
| 海岸 | 1.1x | 良好的貿易優勢 |
| 沙漠 | 0.6x | 惡劣環境 |

## 擴展想法

未來可以添加的功能：

- 資源系統（金礦、木材等）
- 科技樹
- 外交系統（聯盟、貿易）
- 更複雜的地圖生成
- 海戰和空戰
- 城市建設
- 更多勝利條件

## 技術架構

- **Python**: 核心遊戲邏輯
- **OpenRouter**: LLM API服務
- **YAML/JSON**: 狀態保存
- **面向對象設計**: 易於擴展

享受您的征服之旅! 🎮👑
