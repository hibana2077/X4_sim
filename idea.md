# LLM-X4 模擬遊戲──計劃大綱

## 1. 專案目標

* **研究動機**：藉由「4X（eXplore, eXpand, eXploit, eXterminate）」題材，驗證大型語言模型在多步決策、資源分配與長期規劃上的推理能力。
* **最小可行產品（MVP）**：純文字介面即可運作，能讓 LLM 透過結構化指令操控遊戲並回傳結果。
* **可量化評估**：設計結束條件與分數，使不同策略 / 不同模型之間有客觀比較基準。

---

## 2. 基本假設與限制

1. **回合制**：一回合 = 玩家（LLM）行動 → 系統結算 → 狀態更新。
2. **資源類型**：礦石、木材、金屬、糧食（可再細分但先維持 4 種）。
3. **人口機制**：

   * 每座領地（Tile）擁有人口基數與固定增長率。
   * 人口影響採集效率，亦消耗糧食。
4. **地圖結構**：

   * 方格陣列，地形包含平原、森林、山脈、湖泊。
   * 每格保存資源儲量、人口、建築狀態。
5. **行動點（AP）**：每回合限制 5 點行動，避免 LL M 一次做完所有事，迫使其排程。

---

## 3. 系統組件

| 模組                      | 職責說明                           |
| ----------------------- | ------------------------------ |
| **Map**                 | 生成與管理方格地圖，提供領地資訊查詢。            |
| **Tile**                | 儲存單格資料：地形、資源、人口、建築。            |
| **GameState**           | 綜合遊戲狀態（回合數、全域倉庫、事件佇列）。         |
| **Action Engine**       | 解析 LLM 指令並執行：採集、建造、研究、遷移。      |
| **Scoring System**      | 結算勝利條件與評分指標。                   |
| **Observation Builder** | 將狀態序列化成 LLM 易讀格式（JSON / YAML）。 |

---

## 4. 核心玩法迴圈

1. **狀態輸出**：系統把當前 `observation` 傳給 LLM。
2. **策略輸入**：LLM 回傳一組結構化 `actions`。
3. **執行與更新**：Action Engine 檢查合法性 ➜ 扣 AP ➜ 產生效果。
4. **隨機事件**（選配）：每 N 回合擲骰觸發乾旱、瘟疫或豐收。
5. **檢查終局**：達成目標或超過最大回合數即結束，生成評分。

---

## 5. 評估指標（可量化）

* **資源效率**：總產出 ÷ 總 AP。
* **人口健康**：飢荒發生次數、就業率。
* **目標達成度**：在限定回合內是否完成指定里程碑（例如累積 1 000 金屬）。
* **策略多樣性**：行動種類 Shannon entropy，避免單一採集流。